<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link type="text/css" rel="stylesheet" href="https://ouc.multimediapress.cn/player/index.css" />
    <title>播放器</title>
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      #app {
        width: 100%;
        height: 100vh;
      }
      .player {
        width: 960px;
        height: 520px;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <div class="player">
        <dms-player
          ref="videoRef"
          :player-id="'main'"
          :theme-color="'#F44336'"
          :play-type="2"
          :allow-duration="-1"
          :app-id="18"
          :vid="211370"
          :options="options"
          @timeupdate="handleTimeUpdate"
          @canplay="handlePlay"
          @ended="handleEnd"
          >
        </dms-player>
    </div>
  </div>
</body>
</html>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://ouc.multimediapress.cn/player/index.umd.js"></script>
<script >
    const { createApp, defineCustomElement } = Vue
    const app = createApp({
      // 应用根组件选项
      data() {
        return {
          options: {
            cover: "https://oucp.multimediapress.cn//images/1/2022/07/28/cdc35935-a46d-42db-b664-6b8eb4db9d85_1.jpg",
            logo: [
              {
                width: 20,
                position: "top-left",
                origin: "box",
                src: "./static/images/player_logo.png",
                offsetY: 1,
                offsetX: 2,
              }
            ],
            // disableSeek:true, //禁用进度条
            autoPlay: true,
            speed: 1, // 播放速度
            viewPoints:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61],
            textTracks: [
              {
                kind: "subtitles",
                label: "中文",
                src: "https://player.alicdn.com/file/official-video/subtitle-cn.vtt",
                srclang: "zh-CN",
              },
              {
                kind: "subtitles",
                label: "英文",
                src: "https://player.alicdn.com/file/official-video/subtitle-en-us.vtt",
                srclang: "en-US",
                default: true,
              },
            ],
            controlBarVisibility: "always",
          }
        };
      },
      mounted() {
        // console.log(this.$refs.videoRef);// 获取到播放器组件实例
      },
      methods: {
        handleTimeUpdate(e) {
          console.log("timeupdate",e);
        },
        handlePlay(e) {
          console.log("canplay",e);
        },
        handleEnd(e) {
          console.log("endend", e);
          console.log(e.target.childNodes[0].getCurrentTime())
        }
      }
    });
    // 注册播放器组件
    app.component('DmsPlayer', DmsPlayer.default || DmsPlayer);
    // 挂载应用
    app.mount('#app');
</script>